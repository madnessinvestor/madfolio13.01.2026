‚úÖ TEXTO FINAL PARA COLAR NO REPLIT AI (AGENT)

Quero que voc√™ reestruture completamente a l√≥gica de coleta de saldos do meu Wallet Tracker para evitar Loading infinito e garantir que o maior valor de portf√≥lio (Patrim√¥nio L√≠quido / Net Worth) seja capturado corretamente em m√∫ltiplas blockchains, cada uma com sua estrat√©gia correta.

Problema atual:

O sistema tenta usar a mesma l√≥gica de scraping para todas as plataformas.

Algumas plataformas n√£o exp√µem o valor como texto no DOM (ex: Jupiter).

Outras demoram muito para carregar e nunca ‚Äúestabilizam‚Äù.

Resultado: backend fica preso em estado de loading e o frontend nunca recebe resposta.

Quero uma arquitetura por TIPO DE PLATAFORMA, com timeout e fallback obrigat√≥rios.

üîπ EVM / DEBANK (Patrim√¥nio L√≠quido)

Wallets:

EVM-madnessmain ‚Üí https://debank.com/profile/0x083c828b221b126965a146658d4e512337182df1

EVM-madnesstrezor ‚Üí https://debank.com/profile/0xb5a4bccc07c1f25f43c0215627853e39b6bd3ac7

EVM-madnesstwo ‚Üí https://debank.com/profile/0x0b2812ecda6ed953ff85db3c594efe42dfbdb84a

Regras obrigat√≥rias:

Usar Puppeteer em modo headless.

Esperar o elemento de Net Worth / Patrim√¥nio L√≠quido do topo existir.

Ler apenas esse valor espec√≠fico (n√£o varrer div/span).

Normalizar para 2 casas decimais.

Timeout m√°ximo de 60 segundos.

Se falhar, retornar √∫ltimo valor v√°lido em cache, nunca travar.

üîπ SOLANA / JUPITER (Net Worth)

Wallets:

SOL-madnessmain ‚Üí https://jup.ag/portfolio/DyEWx33cWoBdGF1xmWckyhxEodzZUzuDcxR48S76Mswj

SOL-madnesstwo ‚Üí https://jup.ag/portfolio/AgB9wwGXpsXioXQ15vXXWYcDuz5NQbw6DTwDwjfVaQA6

IMPORTANTE:

O valor de Net Worth do Jupiter N√ÉO existe como texto no DOM.

N√ÉO tentar scraping visual para Jupiter.

Regras obrigat√≥rias:

Usar Puppeteer apenas para abrir a p√°gina.

Interceptar requisi√ß√µes de rede (page.on("response")).

Identificar a API interna que retorna os dados de portfolio em JSON.

Extrair o Net Worth total diretamente do JSON.

Timeout m√°ximo de 45 segundos.

Se falhar, retornar √∫ltimo valor v√°lido em cache.

üîπ STARKNET / READY

Wallet:

STARKNET-madness ‚Üí https://portfolio.ready.co/overview/0x00debe613076fc8e271e717c5828c7aec498a64dd589e8b97746e2d659458d68

Regras:

Capturar o Total Portfolio Value exibido no overview.

Usar seletor espec√≠fico do valor total.

Timeout m√°ximo de 45 segundos.

Fallback para √∫ltimo valor v√°lido.

üîπ APTOS / APTOSCAN

Wallet:

APTOS-madness ‚Üí https://aptoscan.com/account/0xfddb8e3f927ce776bc82145b2df5c9f7d2f7d1fcd66e032a6b1e853231f7d9a6

Regras:

N√ÉO usar Puppeteer se poss√≠vel.

Preferir API p√∫blica do Aptoscan ou endpoint JSON se dispon√≠vel.

Extrair o Total Balance / Portfolio Value.

Timeout m√°ximo de 30 segundos.

üîπ SEI / SEISCAN

Wallet:

SEI-madness ‚Üí https://seiscan.io/address/0x712e1b166769b12b95eea57571e3d6fe14f73d9d

Regras:

Preferir API p√∫blica do Seiscan ou requisi√ß√£o JSON.

Se usar Puppeteer, capturar apenas o Total Balance principal.

Timeout m√°ximo de 30 segundos.

üîÅ EXECU√á√ÉO E CONTROLE

Atualizar wallets sempre de forma sequencial, nunca em paralelo.

Aguardar 5 segundos entre cada wallet.

Implementar cache persistente em mem√≥ria.

Nunca deixar uma wallet em estado ‚ÄúLoading‚Äù indefinidamente.

Se uma atualiza√ß√£o falhar, manter o √∫ltimo valor v√°lido.

üéØ OBJETIVO FINAL

Cada wallet deve sempre mostrar o MAIOR valor de portf√≥lio (Patrim√¥nio L√≠quido / Net Worth) que o site exibe ao usu√°rio.

O dashboard nunca deve travar em Loading.

Robustez e confiabilidade s√£o mais importantes que velocidade.

üß† POR QUE ISSO VAI PARAR O ‚ÄúLOADING INFINITO‚Äù

Cada site passa a ter sua pr√≥pria estrat√©gia correta

Jupiter deixa de usar DOM (que nunca funcionou)

Explorers usam API quando poss√≠vel

Todo fluxo tem timeout + fallback

Cache impede ‚Äúzerar‚Äù cards

N√£o existe mais espera infinita

‚úÖ RESUMO HONESTO

Voc√™ chegou no limite m√°ximo do que d√° para fazer corretamente com scraping multi-chain.
O erro n√£o era seu, era usar a mesma l√≥gica para plataformas completamente diferentes.

Com esse pedido, o Replit tem informa√ß√£o suficiente para corrigir tudo de forma definitiva.

Se quiser, no pr√≥ximo passo posso:

te ajudar a validar se o JSON do Jupiter est√° certo

revisar o c√≥digo que o Replit gerar

sugerir arquitetura sem Puppeteer para algumas chains

Mas o texto acima √© exatamente o que voc√™ deve pedir agora.